global
    log /dev/log local0 info
    maxconn 2000

defaults
    log     global
    mode    http
    option  httplog
    option  dontlognull
    retries 3
    option  redispatch
    timeout connect 5000
    timeout client  10000
    timeout server  10000

frontend localhost
    bind *:443
    option tcplog
    mode tcp
    default_backend nodes
    timeout client 120s
    option http-server-close
    option http-pretend-keepalive
    option forwardfor

backend nodes
    mode tcp
    balance roundrobin
    option httpchk get /
    server k8s01 192.168.10.254:443 check-ssl verify none
    server k8s02 192.168.10.253:443 check-ssl verify none
    server k8s03 192.168.10.252:443 check-ssl verify none
    server k8s04 192.168.10.251:443 check-ssl verify none
    server k8s05 192.168.10.250:443 check-ssl verify none
    timeout tunnel 3600s
    timeout server 120s
