allow bootp;
allow booting;
next-server 192.168.1.1;
option ipxe.no-pxedhcp 1;
if exists ipxe.http and exists ipxe.menu {
		filename "http://matchbox.foo:8080/assets/boot.ipxe";
    #filename "http://matchbox.foo:8080/boot.ipxe";
}
elsif exists user-class and option user-class = "iPXE" {
    filename "undionly.kpxe";
}
elsif exists user-class and option user-class = "gPXE" {
    filename "undionly.kpxe";
}
elsif option arch = 00:06 {
    filename "ipxe-x86.efi";
}
elsif option arch = 00:02 {
    filename "ipxe-x86.efi";
}
elsif option arch = 00:07 {
    filename "ipxe-x64.efi";
}
elsif option arch = 00:08 {
    filename "ipxe-x64.efi";
}
elsif option arch = 00:09 {
    filename "ipxe-x64.efi";
}
elsif option arch = 00:00 {
    filename "undionly.kpxe";
}
else {
    # Unsupported client architecture type, so do nothing
}
